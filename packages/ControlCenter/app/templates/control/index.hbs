<sl-split-panel position='80' class='main-split-panel' {{this.registerSplitPanel}}>
  <div slot='start'>
    <div class='display-container'>
      {{#if this.showVJoy}}
        <VirtualJoystick @onJoyMove={{this.onVJoyMove}} @onJoyEnd={{this.onVJoyEnd}} />
      {{/if}}
      <div class='video-container'>
        {{#if this.showVideo}}
          <Video
            @roverAddress={{this.roverAddress}}
            @testMode={{this.testMode}}
            class='rover-video'
          />
        {{/if}}
        <Hud @hidden={{not this.showHud}} class={{if this.fullHud 'full-hud'}} />
      </div>
    </div>
  </div>
  <div slot='end'>
    <ConnectionStatus />
    <sl-divider />

    <div class='row row-center'>
      <div class='col col-6'>
        <sl-select
          label='Driving mode'
          value={{this.locomotionMode}}
          {{on 'sl-change' this.changeDrivingMode}}
        >
          <sl-icon name='car-front' slot='prefix'></sl-icon>
          {{#each-in this.LocomotionMode as |mode|}}
            <sl-option value={{mode}}>{{mode}}</sl-option>
          {{/each-in}}
        </sl-select>
      </div>
    </div>
    <sl-divider />

    <div class='flex flex-space-around'>
      {{#if this.roverConnection.connected}}
        <sl-button
          size='small'
          variant='primary'
          outline
          {{on 'click' this.disconnect}}
        >Disconnect</sl-button>
      {{else}}
        <sl-button
          size='small'
          variant='primary'
          outline
          {{on 'click' this.connect}}
        >Connect</sl-button>
      {{/if}}
      <sl-button
        size='small'
        variant='primary'
        outline
        disabled={{not this.roverConnection.connected}}
        {{on 'click' this.motors}}
      >Toggle Motors</sl-button>
      <sl-button
        size='small'
        variant='primary'
        outline
        disabled={{not this.roverConnection.connected}}
        {{on 'click' this.openCameraSettings}}
      >Camera Settings</sl-button>
    </div>
    <sl-divider />

    <div class='row row-center'>
      <div class='col col-6 left'>
        <sl-switch checked={{this.showHud}} {{on 'sl-change' this.toggleHud}}>HUD</sl-switch>
        <br /><br />
        <sl-switch checked={{this.fullHud}} {{on 'sl-change' this.toggleFullHud}}>Full HUD</sl-switch>
      </div>
      <div class='col col-6 left'>
        <sl-switch checked={{this.showVJoy}} {{on 'sl-change' this.toggleVirtualJoystick}}>Virtual
          joystick</sl-switch>
        <br /><br />
        <sl-switch checked={{this.showVideo}} {{on 'sl-change' this.toggleVideo}}>Video</sl-switch>
      </div>
    </div>
    <sl-divider />

    <div class='flex flex-space-around'>

      <sl-button
        size='small'
        variant='primary'
        outline
        {{on 'click' (fn this.setAspectRatio '4:3')}}
      >4:3</sl-button>

      <sl-button
        size='small'
        variant='primary'
        outline
        {{on 'click' (fn this.setAspectRatio '16:9')}}
      >16:9</sl-button>
    </div>
    <sl-divider />

    <SensorsStatus />
  </div>
</sl-split-panel>

<CameraSettingsModal
  @open={{this.showCameraSettingsModal}}
  @onClose={{this.closeCameraSettings}}
  @onApply={{this.onApplyCameraSettings}}
/>